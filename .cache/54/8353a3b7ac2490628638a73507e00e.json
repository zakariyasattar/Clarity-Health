{"id":"NKYh","dependencies":[{"name":"/Users/zakariyasattar/quirk/node_modules/mongodb/lib/sdam/common.js.map","includedInParent":true,"mtime":1715897018310},{"name":"/Users/zakariyasattar/quirk/node_modules/mongodb/src/sdam/common.ts","includedInParent":true,"mtime":1715897018421},{"name":"/Users/zakariyasattar/quirk/package.json","includedInParent":true,"mtime":1715896611242},{"name":"/Users/zakariyasattar/quirk/node_modules/mongodb/package.json","includedInParent":true,"mtime":1715897018279},{"name":"timers","loc":{"line":4,"column":25,"index":310},"parent":"/Users/zakariyasattar/quirk/node_modules/mongodb/lib/sdam/common.js","resolved":"/Users/zakariyasattar/quirk/node_modules/timers-browserify/main.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports._advanceClusterTime=exports.drainTimerQueue=exports.ServerType=exports.TopologyType=exports.STATE_CONNECTED=exports.STATE_CONNECTING=exports.STATE_CLOSED=exports.STATE_CLOSING=void 0;var e=require(\"timers\");function r(r){r.forEach(e.clearTimeout),r.clear()}function o(e,r){null==e.clusterTime?e.clusterTime=r:r.clusterTime.greaterThan(e.clusterTime.clusterTime)&&(e.clusterTime=r)}exports.STATE_CLOSING=\"closing\",exports.STATE_CLOSED=\"closed\",exports.STATE_CONNECTING=\"connecting\",exports.STATE_CONNECTED=\"connected\",exports.TopologyType=Object.freeze({Single:\"Single\",ReplicaSetNoPrimary:\"ReplicaSetNoPrimary\",ReplicaSetWithPrimary:\"ReplicaSetWithPrimary\",Sharded:\"Sharded\",Unknown:\"Unknown\",LoadBalanced:\"LoadBalanced\"}),exports.ServerType=Object.freeze({Standalone:\"Standalone\",Mongos:\"Mongos\",PossiblePrimary:\"PossiblePrimary\",RSPrimary:\"RSPrimary\",RSSecondary:\"RSSecondary\",RSArbiter:\"RSArbiter\",RSOther:\"RSOther\",RSGhost:\"RSGhost\",Unknown:\"Unknown\",LoadBalancer:\"LoadBalancer\"}),exports.drainTimerQueue=r,exports._advanceClusterTime=o;"},"sourceMaps":{"js":{"mappings":[{"source":"../../src/sdam/common.ts","name":null,"original":{"line":74,"column":0},"generated":{"line":1,"column":0}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":74,"column":0},"generated":{"line":1,"column":13}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":74,"column":0},"generated":{"line":1,"column":20}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":74,"column":0},"generated":{"line":1,"column":35}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":74,"column":0},"generated":{"line":1,"column":43}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":74,"column":0},"generated":{"line":1,"column":56}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":74,"column":0},"generated":{"line":1,"column":57}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":74,"column":0},"generated":{"line":1,"column":64}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":74,"column":0},"generated":{"line":1,"column":68}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":74,"column":0},"generated":{"line":1,"column":76}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":74,"column":0},"generated":{"line":1,"column":96}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":74,"column":0},"generated":{"line":1,"column":104}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":74,"column":0},"generated":{"line":1,"column":120}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":74,"column":0},"generated":{"line":1,"column":128}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":74,"column":0},"generated":{"line":1,"column":139}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":74,"column":0},"generated":{"line":1,"column":147}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":74,"column":0},"generated":{"line":1,"column":160}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":74,"column":0},"generated":{"line":1,"column":168}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":74,"column":0},"generated":{"line":1,"column":184}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":74,"column":0},"generated":{"line":1,"column":192}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":74,"column":0},"generated":{"line":1,"column":209}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":74,"column":0},"generated":{"line":1,"column":217}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":74,"column":0},"generated":{"line":1,"column":230}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":74,"column":0},"generated":{"line":1,"column":238}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":74,"column":0},"generated":{"line":1,"column":257}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":259}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":263}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":265}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":273}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":1,"column":283}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":53,"column":16},"generated":{"line":1,"column":292}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":53,"column":32},"generated":{"line":1,"column":294}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":54,"column":2},"generated":{"line":1,"column":297}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":54,"column":8},"generated":{"line":1,"column":299}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":54,"column":16},"generated":{"line":1,"column":307}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":54,"column":16},"generated":{"line":1,"column":309}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":55,"column":2},"generated":{"line":1,"column":323}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":55,"column":8},"generated":{"line":1,"column":325}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":74,"column":0},"generated":{"line":1,"column":333}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":74,"column":16},"generated":{"line":1,"column":342}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":75,"column":2},"generated":{"line":1,"column":344}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":76,"column":2},"generated":{"line":1,"column":346}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":78,"column":28},"generated":{"line":1,"column":349}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":78,"column":6},"generated":{"line":1,"column":355}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":78,"column":13},"generated":{"line":1,"column":357}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":79,"column":4},"generated":{"line":1,"column":369}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":79,"column":11},"generated":{"line":1,"column":371}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":79,"column":25},"generated":{"line":1,"column":383}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":81,"column":8},"generated":{"line":1,"column":385}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":81,"column":21},"generated":{"line":1,"column":387}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":81,"column":33},"generated":{"line":1,"column":399}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":81,"column":45},"generated":{"line":1,"column":411}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":81,"column":52},"generated":{"line":1,"column":413}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":81,"column":64},"generated":{"line":1,"column":425}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":82,"column":6},"generated":{"line":1,"column":440}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":82,"column":13},"generated":{"line":1,"column":442}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":82,"column":27},"generated":{"line":1,"column":454}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":8,"column":13},"generated":{"line":1,"column":457}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":8,"column":13},"generated":{"line":1,"column":465}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":8,"column":29},"generated":{"line":1,"column":479}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":489}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":9,"column":13},"generated":{"line":1,"column":497}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":9,"column":28},"generated":{"line":1,"column":510}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":10,"column":13},"generated":{"line":1,"column":519}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":10,"column":13},"generated":{"line":1,"column":527}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":10,"column":32},"generated":{"line":1,"column":544}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":11,"column":13},"generated":{"line":1,"column":557}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":11,"column":13},"generated":{"line":1,"column":565}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":11,"column":31},"generated":{"line":1,"column":581}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":17,"column":13},"generated":{"line":1,"column":593}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":17,"column":13},"generated":{"line":1,"column":601}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":17,"column":28},"generated":{"line":1,"column":614}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":17,"column":35},"generated":{"line":1,"column":621}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":17,"column":42},"generated":{"line":1,"column":628}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":18,"column":2},"generated":{"line":1,"column":629}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":18,"column":10},"generated":{"line":1,"column":636}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":19,"column":2},"generated":{"line":1,"column":645}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":19,"column":23},"generated":{"line":1,"column":665}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":20,"column":2},"generated":{"line":1,"column":687}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":20,"column":25},"generated":{"line":1,"column":709}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":21,"column":2},"generated":{"line":1,"column":733}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":21,"column":11},"generated":{"line":1,"column":741}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":22,"column":2},"generated":{"line":1,"column":751}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":22,"column":11},"generated":{"line":1,"column":759}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":23,"column":2},"generated":{"line":1,"column":769}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":23,"column":16},"generated":{"line":1,"column":782}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":33,"column":13},"generated":{"line":1,"column":799}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":33,"column":13},"generated":{"line":1,"column":807}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":33,"column":26},"generated":{"line":1,"column":818}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":33,"column":33},"generated":{"line":1,"column":825}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":33,"column":40},"generated":{"line":1,"column":832}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":34,"column":2},"generated":{"line":1,"column":833}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":34,"column":14},"generated":{"line":1,"column":844}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":35,"column":2},"generated":{"line":1,"column":857}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":35,"column":10},"generated":{"line":1,"column":864}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":36,"column":2},"generated":{"line":1,"column":873}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":36,"column":19},"generated":{"line":1,"column":889}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":37,"column":2},"generated":{"line":1,"column":907}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":37,"column":13},"generated":{"line":1,"column":917}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":38,"column":2},"generated":{"line":1,"column":929}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":38,"column":15},"generated":{"line":1,"column":941}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":39,"column":2},"generated":{"line":1,"column":955}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":39,"column":13},"generated":{"line":1,"column":965}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":40,"column":2},"generated":{"line":1,"column":977}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":40,"column":11},"generated":{"line":1,"column":985}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":41,"column":2},"generated":{"line":1,"column":995}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":41,"column":11},"generated":{"line":1,"column":1003}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":42,"column":2},"generated":{"line":1,"column":1013}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":42,"column":11},"generated":{"line":1,"column":1021}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":43,"column":2},"generated":{"line":1,"column":1031}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":43,"column":16},"generated":{"line":1,"column":1044}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":1,"column":1061}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":1,"column":1069}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":53,"column":0},"generated":{"line":1,"column":1085}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":74,"column":0},"generated":{"line":1,"column":1087}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":74,"column":0},"generated":{"line":1,"column":1095}},{"source":"../../src/sdam/common.ts","name":null,"original":{"line":74,"column":0},"generated":{"line":1,"column":1115}}],"sources":{"../../src/sdam/common.ts":"import { clearTimeout } from 'timers';\n\nimport type { Binary, Long, Timestamp } from '../bson';\nimport type { ClientSession } from '../sessions';\nimport type { Topology } from './topology';\n\n// shared state names\nexport const STATE_CLOSING = 'closing';\nexport const STATE_CLOSED = 'closed';\nexport const STATE_CONNECTING = 'connecting';\nexport const STATE_CONNECTED = 'connected';\n\n/**\n * An enumeration of topology types we know about\n * @public\n */\nexport const TopologyType = Object.freeze({\n  Single: 'Single',\n  ReplicaSetNoPrimary: 'ReplicaSetNoPrimary',\n  ReplicaSetWithPrimary: 'ReplicaSetWithPrimary',\n  Sharded: 'Sharded',\n  Unknown: 'Unknown',\n  LoadBalanced: 'LoadBalanced'\n} as const);\n\n/** @public */\nexport type TopologyType = (typeof TopologyType)[keyof typeof TopologyType];\n\n/**\n * An enumeration of server types we know about\n * @public\n */\nexport const ServerType = Object.freeze({\n  Standalone: 'Standalone',\n  Mongos: 'Mongos',\n  PossiblePrimary: 'PossiblePrimary',\n  RSPrimary: 'RSPrimary',\n  RSSecondary: 'RSSecondary',\n  RSArbiter: 'RSArbiter',\n  RSOther: 'RSOther',\n  RSGhost: 'RSGhost',\n  Unknown: 'Unknown',\n  LoadBalancer: 'LoadBalancer'\n} as const);\n\n/** @public */\nexport type ServerType = (typeof ServerType)[keyof typeof ServerType];\n\n/** @internal */\nexport type TimerQueue = Set<NodeJS.Timeout>;\n\n/** @internal */\nexport function drainTimerQueue(queue: TimerQueue): void {\n  queue.forEach(clearTimeout);\n  queue.clear();\n}\n\n/**\n * @public\n * Gossiped in component for the cluster time tracking the state of user databases\n * across the cluster. It may optionally include a signature identifying the process that\n * generated such a value.\n */\nexport interface ClusterTime {\n  clusterTime: Timestamp;\n  /** Used to validate the identity of a request or response's ClusterTime. */\n  signature?: {\n    hash: Binary;\n    keyId: Long;\n  };\n}\n\n/** Shared function to determine clusterTime for a given topology or session */\nexport function _advanceClusterTime(\n  entity: Topology | ClientSession,\n  $clusterTime: ClusterTime\n): void {\n  if (entity.clusterTime == null) {\n    entity.clusterTime = $clusterTime;\n  } else {\n    if ($clusterTime.clusterTime.greaterThan(entity.clusterTime.clusterTime)) {\n      entity.clusterTime = $clusterTime;\n    }\n  }\n}\n"},"lineCount":null}},"error":null,"hash":"c4b2d9d51ce27405fae00343cd89922c","cacheData":{"env":{}}}