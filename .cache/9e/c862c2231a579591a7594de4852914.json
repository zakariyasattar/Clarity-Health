{"id":"node_modules/query.js/lib/composer/RestQueryComposer.js","dependencies":[{"name":"/Users/zakariyasattar/quirk/package.json","includedInParent":true,"mtime":1716337603724},{"name":"/Users/zakariyasattar/quirk/node_modules/query.js/package.json","includedInParent":true,"mtime":1716337603716},{"name":"../..","loc":{"line":2,"column":46,"index":123},"parent":"/Users/zakariyasattar/quirk/node_modules/query.js/lib/composer/RestQueryComposer.js","resolved":"/Users/zakariyasattar/quirk/node_modules/query.js/index.js"}],"generated":{"js":"var define;\n(define = typeof define != \"undefined\" ? define : function (deps, factory) {\n    module.exports = factory(exports, require(\"../..\").Query);\n    define = undefined;\n});\n\ndefine([\"exports\", \"Query\"], function (exports, Query) {\n\n    var comparatorMap = {\n        \"eql\": \"=\",\n        \"gt\": \">\",\n        \"lt\": \"<\",\n        \"lte\": \"<=\",\n        \"gte\": \">=\"\n    }, undefined;\n\n    var QueryComposer = {\n\n        compose: function (query) {\n\n            var hash = query.query,\n                ret = {};\n\n            if (hash.sort) {\n                ret.sort = this.translateSort(hash.sort);\n            }\n\n            if (hash.where) {\n                ret.where = this.translateOperator(hash.where)\n            }\n\n            return ret;\n        },\n\n        translateSort: function (sort) {\n            var ret = [];\n            for(var i = 0; i < sort.length; i++){\n                ret.push((sort[i].direction === 1 ? \"+\" : \"-\") + sort[i].field);\n            }\n            return ret.join(\",\");\n        },\n\n        translateOperator: function (operator, depth) {\n            depth = depth === undefined ? 0 : depth;\n            var name = operator.operator;\n            if (operator instanceof Query.Where) {\n                var expressions = this.translateExpressions(operator.expressions, depth + 1).join(\" \" + name + \" \");\n                if (expressions.length > 1 && depth !== 0) {\n                    return \"(\" + expressions + \")\";\n                }\n                return expressions;\n            } else if (operator instanceof  Query.Comparator) {\n                var value = operator.getValue();\n                var type = typeof(value);\n                if (type === \"string\") {\n                    if (/^(\\d+|false|true|null)$/.test(value)\n                        || this.value === \"false\" || this.value === \"true\") {\n                        value = type + \":\" + value;\n                    }\n                }\n                if (comparatorMap.hasOwnProperty(name)) {\n                    return operator.field + comparatorMap[name] + value;\n                } else if (operator.field && value !== undefined) {\n                    if (value instanceof Array) {\n                        value = \"(\" + operator.value.join(\",\") + \")\";\n                    }\n                    return name + \"(\" + operator.field + \",\" + value + \")\";\n                }\n            } else {\n                return name;\n            }\n        },\n\n        translateExpressions: function (expressions, depth) {\n            var ret = [];\n            for (var i = 0; i < expressions.length; i++) {\n                ret.push(this.translateOperator(expressions[i], depth));\n            }\n            return ret;\n        }\n\n    };\n\n    exports.RestQueryComposer = QueryComposer;\n\n    return exports;\n});"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":1,"column":0},"generated":{"line":2,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":2,"column":0},"generated":{"line":3,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":3,"column":0},"generated":{"line":4,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":4,"column":0},"generated":{"line":5,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":5,"column":0},"generated":{"line":6,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":6,"column":0},"generated":{"line":7,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":7,"column":0},"generated":{"line":8,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":8,"column":0},"generated":{"line":9,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":9,"column":0},"generated":{"line":10,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":10,"column":0},"generated":{"line":11,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":11,"column":0},"generated":{"line":12,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":12,"column":0},"generated":{"line":13,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":13,"column":0},"generated":{"line":14,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":14,"column":0},"generated":{"line":15,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":15,"column":0},"generated":{"line":16,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":16,"column":0},"generated":{"line":17,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":17,"column":0},"generated":{"line":18,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":18,"column":0},"generated":{"line":19,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":19,"column":0},"generated":{"line":20,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":20,"column":0},"generated":{"line":21,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":21,"column":0},"generated":{"line":22,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":22,"column":0},"generated":{"line":23,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":23,"column":0},"generated":{"line":24,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":24,"column":0},"generated":{"line":25,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":25,"column":0},"generated":{"line":26,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":26,"column":0},"generated":{"line":27,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":27,"column":0},"generated":{"line":28,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":28,"column":0},"generated":{"line":29,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":29,"column":0},"generated":{"line":30,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":30,"column":0},"generated":{"line":31,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":31,"column":0},"generated":{"line":32,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":32,"column":0},"generated":{"line":33,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":33,"column":0},"generated":{"line":34,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":34,"column":0},"generated":{"line":35,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":35,"column":0},"generated":{"line":36,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":36,"column":0},"generated":{"line":37,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":37,"column":0},"generated":{"line":38,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":38,"column":0},"generated":{"line":39,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":39,"column":0},"generated":{"line":40,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":40,"column":0},"generated":{"line":41,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":41,"column":0},"generated":{"line":42,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":42,"column":0},"generated":{"line":43,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":43,"column":0},"generated":{"line":44,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":44,"column":0},"generated":{"line":45,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":45,"column":0},"generated":{"line":46,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":46,"column":0},"generated":{"line":47,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":47,"column":0},"generated":{"line":48,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":48,"column":0},"generated":{"line":49,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":49,"column":0},"generated":{"line":50,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":50,"column":0},"generated":{"line":51,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":51,"column":0},"generated":{"line":52,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":52,"column":0},"generated":{"line":53,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":53,"column":0},"generated":{"line":54,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":54,"column":0},"generated":{"line":55,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":55,"column":0},"generated":{"line":56,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":56,"column":0},"generated":{"line":57,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":57,"column":0},"generated":{"line":58,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":58,"column":0},"generated":{"line":59,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":59,"column":0},"generated":{"line":60,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":60,"column":0},"generated":{"line":61,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":61,"column":0},"generated":{"line":62,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":62,"column":0},"generated":{"line":63,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":63,"column":0},"generated":{"line":64,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":64,"column":0},"generated":{"line":65,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":65,"column":0},"generated":{"line":66,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":66,"column":0},"generated":{"line":67,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":67,"column":0},"generated":{"line":68,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":68,"column":0},"generated":{"line":69,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":69,"column":0},"generated":{"line":70,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":70,"column":0},"generated":{"line":71,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":71,"column":0},"generated":{"line":72,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":72,"column":0},"generated":{"line":73,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":73,"column":0},"generated":{"line":74,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":74,"column":0},"generated":{"line":75,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":75,"column":0},"generated":{"line":76,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":76,"column":0},"generated":{"line":77,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":77,"column":0},"generated":{"line":78,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":78,"column":0},"generated":{"line":79,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":79,"column":0},"generated":{"line":80,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":80,"column":0},"generated":{"line":81,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":81,"column":0},"generated":{"line":82,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":82,"column":0},"generated":{"line":83,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":83,"column":0},"generated":{"line":84,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":84,"column":0},"generated":{"line":85,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":85,"column":0},"generated":{"line":86,"column":0}},{"source":"node_modules/query.js/lib/composer/RestQueryComposer.js","original":{"line":86,"column":0},"generated":{"line":87,"column":0}}],"sources":{"node_modules/query.js/lib/composer/RestQueryComposer.js":"(define = typeof define != \"undefined\" ? define : function (deps, factory) {\n    module.exports = factory(exports, require(\"../..\").Query);\n    define = undefined;\n});\n\ndefine([\"exports\", \"Query\"], function (exports, Query) {\n\n    var comparatorMap = {\n        \"eql\": \"=\",\n        \"gt\": \">\",\n        \"lt\": \"<\",\n        \"lte\": \"<=\",\n        \"gte\": \">=\"\n    }, undefined;\n\n    var QueryComposer = {\n\n        compose: function (query) {\n\n            var hash = query.query,\n                ret = {};\n\n            if (hash.sort) {\n                ret.sort = this.translateSort(hash.sort);\n            }\n\n            if (hash.where) {\n                ret.where = this.translateOperator(hash.where)\n            }\n\n            return ret;\n        },\n\n        translateSort: function (sort) {\n            var ret = [];\n            for(var i = 0; i < sort.length; i++){\n                ret.push((sort[i].direction === 1 ? \"+\" : \"-\") + sort[i].field);\n            }\n            return ret.join(\",\");\n        },\n\n        translateOperator: function (operator, depth) {\n            depth = depth === undefined ? 0 : depth;\n            var name = operator.operator;\n            if (operator instanceof Query.Where) {\n                var expressions = this.translateExpressions(operator.expressions, depth + 1).join(\" \" + name + \" \");\n                if (expressions.length > 1 && depth !== 0) {\n                    return \"(\" + expressions + \")\";\n                }\n                return expressions;\n            } else if (operator instanceof  Query.Comparator) {\n                var value = operator.getValue();\n                var type = typeof(value);\n                if (type === \"string\") {\n                    if (/^(\\d+|false|true|null)$/.test(value)\n                        || this.value === \"false\" || this.value === \"true\") {\n                        value = type + \":\" + value;\n                    }\n                }\n                if (comparatorMap.hasOwnProperty(name)) {\n                    return operator.field + comparatorMap[name] + value;\n                } else if (operator.field && value !== undefined) {\n                    if (value instanceof Array) {\n                        value = \"(\" + operator.value.join(\",\") + \")\";\n                    }\n                    return name + \"(\" + operator.field + \",\" + value + \")\";\n                }\n            } else {\n                return name;\n            }\n        },\n\n        translateExpressions: function (expressions, depth) {\n            var ret = [];\n            for (var i = 0; i < expressions.length; i++) {\n                ret.push(this.translateOperator(expressions[i], depth));\n            }\n            return ret;\n        }\n\n    };\n\n    exports.RestQueryComposer = QueryComposer;\n\n    return exports;\n});"},"lineCount":87}},"error":null,"hash":"ca0bfbcc70475fb8ea78cf201507857e","cacheData":{"env":{}}}